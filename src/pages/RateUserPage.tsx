import Layout from '../components/layout/Layout'
import { useNavigate } from 'react-router-dom'
import AnimatedBackground from '../AnimatedBackground'
import { useState, useEffect } from 'react'
import { useChat } from '../context/ChatContext'

const RateUserPage = () => {
  const navigate = useNavigate()
  const [rating, setRating] = useState(0)
  const { interlocutor } = useChat()

  return (
    <Layout>
      <div className="flex flex-col min-h-screen">
        <div className="px-4 pt-6">
          <div className="text-3xl font-bold text-white mb-6">FriendsRate</div>
          
          <div className="bg-white rounded-[24px] p-4 flex items-center justify-between">
            <div className="flex items-center gap-4">
              <svg width="42" height="42" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="34" height="34" rx="12" fill="#005CF9"/>
                <path d="M22.087 12.31C22.125 13.5801 22.084 14.8501 22.0941 16.1204C22.1104 18.7653 20.3381 20.6427 17.9086 21.3781C16.0028 21.955 12.5151 22.7483 12.5151 22.7483C12.5408 19.439 12.5504 16.3167 12.5151 13.0073C12.5084 12.3161 12.5296 11.6912 12.8502 10.8492C13.1709 10.0072 14.1094 8 17.2491 8C20.3887 8 21.9786 10.3977 22.087 12.31ZM14.8437 10.6024C14.2405 11.3568 14.075 12.0661 14.0863 13.0073C14.0882 15.5572 14.0903 18.1071 14.0962 20.6569C16.4904 20.2295 20.4596 19.5843 20.4869 16.4935C20.4989 15.3497 20.4923 14.2054 20.5075 13.0616C20.5189 12.1492 20.3977 11.319 19.7262 10.6329C18.467 9.25672 16.1605 9.19538 14.8437 10.6024Z" fill="#ECF8FF"/>
                <path d="M23.7028 12.9854C23.7855 12.9858 23.7855 12.9858 23.8698 12.9862C23.9297 12.9864 23.9895 12.9865 24.0512 12.9867C24.1138 12.9876 24.1764 12.9884 24.2409 12.9893C24.3352 12.9894 24.3352 12.9894 24.4314 12.9895C24.8984 12.9928 24.8984 12.9928 24.9836 13.075C24.9917 13.1813 24.9947 13.2879 24.9956 13.3945C24.9963 13.4627 24.9971 13.531 24.9978 13.6014C24.9983 13.7137 24.9983 13.7137 24.9988 13.8283C24.9992 13.9059 24.9996 13.9835 25 14.0634C24.9877 20.4371 24.2923 23.1465 15.8531 24.886C15.8531 25.2668 15.8531 25.5968 15.8531 25.9891C16.3052 25.9891 16.6129 25.9891 17.0372 25.9891C17.0867 26.4659 17.0373 26.9531 17.0372 27.4317C15.7745 27.4317 12.9382 27.4432 12.9382 27.4432V26.0315H14.1945C14.1945 25.777 14.1945 25.0875 14.1945 24.886L12.752 23.8677C21.4496 22.0858 23.3111 21.2223 23.3791 14.5269C23.3816 14.3019 23.3849 14.0769 23.3884 13.8519C23.3888 13.783 23.3891 13.7142 23.3896 13.6432C23.3911 13.5484 23.3911 13.5484 23.3926 13.4517C23.3931 13.3962 23.3937 13.3406 23.3942 13.2834C23.4227 13.0877 23.4989 13.011 23.7028 12.9854Z" fill="#ECF8FF"/>
                <path d="M8.47196 12.9644C8.56127 12.9642 8.56127 12.9642 8.65239 12.9639C8.71462 12.9644 8.77686 12.965 8.84099 12.9656C8.90322 12.965 8.96546 12.9644 9.02959 12.9639C9.08913 12.9641 9.14867 12.9642 9.21001 12.9644C9.26464 12.9646 9.31926 12.9648 9.37555 12.9649C9.51364 12.9836 9.51364 12.9836 9.66312 13.1278C9.68293 13.2798 9.68293 13.2798 9.68458 13.4701C9.68558 13.5415 9.68658 13.6128 9.68761 13.6863C9.68801 13.764 9.6884 13.8416 9.68881 13.9217C9.6899 14.0019 9.691 14.0822 9.69212 14.165C9.69561 14.4232 9.69815 14.6815 9.70049 14.9397C9.66312 17.9621 10.3397 19.854 11.0124 20.8275C11.0124 21.6568 11.0124 22.0535 11.0124 22.7222C8.94379 21.452 8.00859 18.4565 8.0063 16.1682C8.00605 16.0814 8.0058 15.9947 8.00554 15.9053C8.00517 15.723 8.00499 15.5408 8.005 15.3585C8.00484 15.0786 8.00348 14.7987 8.00207 14.5187C8.00185 14.3414 8.0017 14.1641 8.00163 13.9867C8.00082 13.8608 8.00082 13.8608 8 13.7322C8.00023 13.6549 8.00046 13.5776 8.0007 13.498C8.00059 13.4298 8.00048 13.3616 8.00037 13.2914C8.03443 12.99 8.1949 12.9653 8.47196 12.9644Z" fill="#ECF8FF"/>
              </svg>
              <span className="text-xl text-black font-medium">4870</span>
              <svg className="w-9 h-9 text-blue-500" viewBox="0 0 24 24" fill="currentColor" strokeLinecap="round" strokeLinejoin="round">
                <path d="M12 2.5L14.59 8.17L20.5 9.08L16.25 13.58L17.4 19.5L12 16.84L6.6 19.5L7.75 13.58L3.5 9.08L9.41 8.17L12 2.5Z" 
                  strokeWidth="0.5"
                  stroke="currentColor"
                />
              </svg>
              <div className="flex items-center gap-1">
                <span className="text-xl text-black font-medium">4.5</span>
                <span className="text-base text-black/40">(392)</span>
              </div>
            </div>
            <button className="bg-blue-500 px-8 py-2.5 rounded-2xl text-base font-medium text-white">
              Connect Wallet
            </button>
          </div>
        </div>

        {/* Центральна частина */}
        <div className="flex-1 flex flex-col items-center justify-center px-4">
          {/* Аватар */}
          <div className="w-40 h-40 rounded-full bg-[#0066FF] flex items-center justify-center mb-4">
            <svg width="96" height="96" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z" 
                fill="#ECF8FF"
              />
            </svg>
          </div>
          
          {/* Рейтинг користувача */}
          <div className="flex items-center gap-2 mb-12">
            <svg className="w-6 h-6 text-[#0066FF]" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2L14.59 7.76L20.5 8.67L16.25 13.17L17.4 19.1L12 16.43L6.6 19.1L7.75 13.17L3.5 8.67L9.41 7.76L12 2Z"/>
            </svg>
            <span className="text-2xl font-medium text-white">{interlocutor.rating}</span>
            <span className="text-2xl font-medium text-white">{interlocutor.name}</span>
          </div>

          {/* Заголовок */}
          <h2 className="text-[40px] leading-tight font-bold text-white text-center mb-16">
            Did you enjoy the<br />conversation?
          </h2>

          {/* Зірки для оцінки */}
          <div className="flex justify-center mb-20 relative">
            {/* SVG із зірками */}
            <svg width="296" height="44" viewBox="0 0 296 44" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M25.1681 6.31387L28.3948 12.8204C28.8348 13.726 30.0081 14.595 30.9981 14.76L36.8446 15.7409C40.5846 16.3697 41.4646 19.105 38.7696 21.8037L34.2229 26.387C33.4529 27.1625 33.0313 28.6604 33.2696 29.7329L34.5713 35.407C35.5979 39.8987 33.2329 41.6349 29.2913 39.2882L23.8096 36.0157C22.8196 35.4254 21.1879 35.4254 20.1796 36.0157L14.7016 39.2882C10.7783 41.6349 8.39494 39.8785 9.42161 35.407L10.7233 29.7329C10.9616 28.6604 10.5399 27.1625 9.76994 26.387L5.22328 21.8037C2.54844 19.1032 3.41011 16.3697 7.14828 15.7409L12.9966 14.76C13.9683 14.595 15.1416 13.726 15.5816 12.8204L18.8083 6.31387C20.5683 2.7847 23.4283 2.7847 25.1699 6.31387" stroke={rating >= 1 ? "#0066FF" : "#ECF8FF"} fill={rating >= 1 ? "#0066FF" : "none"} strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M88.1681 6.31387L91.3948 12.8204C91.8348 13.726 93.0081 14.595 93.9981 14.76L99.8446 15.7409C103.585 16.3697 104.465 19.105 101.77 21.8037L97.2229 26.387C96.4529 27.1625 96.0313 28.6604 96.2696 29.7329L97.5713 35.407C98.5979 39.8987 96.2329 41.6349 92.2913 39.2882L86.8096 36.0157C85.8196 35.4254 84.1879 35.4254 83.1796 36.0157L77.7016 39.2882C73.7783 41.6349 71.3949 39.8785 72.4216 35.407L73.7233 29.7329C73.9616 28.6604 73.5399 27.1625 72.7699 26.387L68.2233 21.8037C65.5484 19.1032 66.4101 16.3697 70.1483 15.7409L75.9966 14.76C76.9683 14.595 78.1416 13.726 78.5816 12.8204L81.8083 6.31387C83.5683 2.7847 86.4283 2.7847 88.1699 6.31387" stroke={rating >= 2 ? "#0066FF" : "#ECF8FF"} fill={rating >= 2 ? "#0066FF" : "none"} strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M151.168 6.31387L154.395 12.8204C154.835 13.726 156.008 14.595 156.998 14.76L162.845 15.7409C166.585 16.3697 167.465 19.105 164.77 21.8037L160.223 26.387C159.453 27.1625 159.031 28.6604 159.27 29.7329L160.571 35.407C161.598 39.8987 159.233 41.6349 155.291 39.2882L149.81 36.0157C148.82 35.4254 147.188 35.4254 146.18 36.0157L140.702 39.2882C136.778 41.6349 134.395 39.8785 135.422 35.407L136.723 29.7329C136.962 28.6604 136.54 27.1625 135.77 26.387L131.223 21.8037C128.548 19.1032 129.41 16.3697 133.148 15.7409L138.997 14.76C139.968 14.595 141.142 13.726 141.582 12.8204L144.808 6.31387C146.568 2.7847 149.428 2.7847 151.17 6.31387" stroke={rating >= 3 ? "#0066FF" : "#ECF8FF"} fill={rating >= 3 ? "#0066FF" : "none"} strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M214.168 6.31387L217.395 12.8204C217.835 13.726 219.008 14.595 219.998 14.76L225.845 15.7409C229.585 16.3697 230.465 19.105 227.77 21.8037L223.223 26.387C222.453 27.1625 222.031 28.6604 222.27 29.7329L223.571 35.407C224.598 39.8987 222.233 41.6349 218.291 39.2882L212.81 36.0157C211.82 35.4254 210.188 35.4254 209.18 36.0157L203.702 39.2882C199.778 41.6349 197.395 39.8785 198.422 35.407L199.723 29.7329C199.962 28.6604 199.54 27.1625 198.77 26.387L194.223 21.8037C191.548 19.1032 192.41 16.3697 196.148 15.7409L201.997 14.76C202.968 14.595 204.142 13.726 204.582 12.8204L207.808 6.31387C209.568 2.7847 212.428 2.7847 214.17 6.31387" stroke={rating >= 4 ? "#0066FF" : "#ECF8FF"} fill={rating >= 4 ? "#0066FF" : "none"} strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M277.168 6.31387L280.395 12.8204C280.835 13.726 282.008 14.595 282.998 14.76L288.845 15.7409C292.585 16.3697 293.465 19.105 290.77 21.8037L286.223 26.387C285.453 27.1625 285.031 28.6604 285.27 29.7329L286.571 35.407C287.598 39.8987 285.233 41.6349 281.291 39.2882L275.81 36.0157C274.82 35.4254 273.188 35.4254 272.18 36.0157L266.702 39.2882C262.778 41.6349 260.395 39.8785 261.422 35.407L262.723 29.7329C262.962 28.6604 262.54 27.1625 261.77 26.387L257.223 21.8037C254.548 19.1032 255.41 16.3697 259.148 15.7409L264.997 14.76C265.968 14.595 267.142 13.726 267.582 12.8204L270.808 6.31387C272.568 2.7847 275.428 2.7847 277.17 6.31387" stroke={rating >= 5 ? "#0066FF" : "#ECF8FF"} fill={rating >= 5 ? "#0066FF" : "none"} strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>

            {/* Прозорі кнопки поверх зірок */}
            <div className="absolute inset-0 flex">
              <button onClick={() => setRating(1)} className="w-[44px] h-[44px]" />
              <button onClick={() => setRating(2)} className="w-[44px] h-[44px] ml-[19px]" />
              <button onClick={() => setRating(3)} className="w-[44px] h-[44px] ml-[19px]" />
              <button onClick={() => setRating(4)} className="w-[44px] h-[44px] ml-[19px]" />
              <button onClick={() => setRating(5)} className="w-[44px] h-[44px] ml-[19px]" />
            </div>
          </div>
        </div>

        {/* Кнопка Exit */}
        <div className="px-4 absolute bottom-36 left-0 right-0 flex justify-center">
          <button 
            onClick={() => navigate('/home')}
            className="w-[320px] bg-[#005CF9] text-white py-4 rounded-[32px] text-base font-medium"
          >
            Exit
          </button>
        </div>
      </div>
    </Layout>
  )
}

export default RateUserPage 